<div class="agenda-form-page">
    <div class="login-box box-5 box-i-7 box-m-10 box-p-12">
        <h1><% if (editing) {%>Edit<% } else { %>Add<% } %> Agenda</h1>
        <hr>
        <% if(errorMessage) { %>
        <p class="tbold fs20px lh2em tac error-message"><%= errorMessage%></p>
        <% } %>
        <form action="/<% if (editing) {%>edit-agenda<% } else { %>add-agenda<% } %>" method="POST">
            <p>Date:</p>
            <input class="<%= validationErrors.find(e => e.param === 'meetingDay') ?  'invalid' : '' %>" type="date" 
            name="meetingDay" required value="<% if (oldInput.meetingDay !== '') { %><%=oldInput.meetingDay %><% } else if (editing) { %><%=agenda.meetingDay%><% } %>"> <!-- TODO: Implement this same logic in the whole code.-->
            <p>Presiding Authority:</p>
            <input class="<%= validationErrors.find(e => e.param === 'presiding') ?  'invalid' : '' %>" type="text"
                required placeholder="Who is presiding the meeting?" name="presiding" 
                value="<% if (editing) { %><%=agenda.presiding%><% } %>" value="<%= oldInput.presiding %>">  
            <p>Leading Authority:</p>
            <input class="<%= validationErrors.find(e => e.param === 'leading') ?  'invalid' : '' %>" type="text"
                required placeholder="Who is leading the meeting?" name="leading"
                value="<% if (editing) { %><%=agenda.leading%><% } %>" value="<%= oldInput.leading %>">
            <hr>
            <p>Authorities Acknowledgment:</p>
            <textarea name="authorities" placeholder="Authorities Acknowledgment"><% if (editing) { %><%=agenda.authorities%><% } %></textarea>
            <p>Piano Player:</p>
            <input name="pPlayer" type="text" placeholder="Who is playing the piano?" value="<% if (editing) { %><%=agenda.pPlayer%><% } %>" value="<%= oldInput.pPlayer %>">
            <p>Music Director:</p>
            <input name="mDirector" type="text" placeholder="Who is directing the music?" value="<% if (editing) { %><%=agenda.mDirector%><% } %>" value="<%= oldInput.mDirector %>">
            <p>First Hymn:</p>
            <input name="fHymn" type="text" placeholder="What is the first hymn?" value="<% if (editing) { %><%=agenda.fHymn%><% } %>" value="<%= oldInput.fHymn %>">
            <p>First Prayer:</p>
            <input name="fPrayer" type="text" placeholder="What is the first prayer?" value="<% if (editing) { %><%=agenda.fPrayer%><% } %>" value="<%= oldInput.fPrayer %>">
            <hr>
            <p>Ward Affairs:</p>
            <textarea name="wAffairs" placeholder="What are the Ward Affairs?"><% if (editing) { %><%=agenda.wAffairs%><% } %></textarea>
            <p>Stake Affairs</p>
            <hr>
            <h2>Sacrament Time</h2>
            <br>
            <p>Sacrament Hymn:</p>
            <input name="sHymn" type="text" placeholder="What is the sacrament hymn?" value="<% if (editing) { %><%=agenda.sHymn%><% } %>">
            <% if (!editing) { %>
            <hr>
            <h2>Select if it's a Normal or a Fast Meeting</h2>
            <div id="nfoptions">
                <span id="nMeetingBtn">Normal</span>
                <span id="fMeetingBtn">Fast</span>
            </div>
            <% } %>
            <hr>
            <div id="isNormalMeeting">
                <p>First Talk Speaker:</p>
                <input name="fSpeaker" type="text" placeholder="Who is the First Talk Speaker?" 
                value="<% if (editing) { %><%=agenda.fSpeaker%><% } %>">
                <p>First Talk Topic:</p>
                <input name="fTopic" type="text" placeholder="Who is the First Talk Topic?" 
                value="<% if (editing) { %><%=agenda.fTopic%><% } %>">
                <br>
                <br>
                <p>Second Talk Speaker:</p>
                <input name="sSpeaker" type="text" placeholder="Who is the Second Talk Speaker?" 
                value="<% if (editing) { %><%=agenda.sSpeaker%><% } %>">
                <p>Second Talk Topic:</p>
                <input name="sTopic" type="text" placeholder="Who is the Second Talk Topic?" 
                value="<% if (editing) { %><%=agenda.sTopic%><% } %>">
                <br>
                <br>
                <p>Third Talk Speaker:</p>
                <input name="tSpeaker" type="text" placeholder="Who is the Third Talk Speaker?" 
                value="<% if (editing) { %><%=agenda.tSpeaker%><% } %>">
                <p>Third Talk Topic:</p>
                <input name="tTopic" type="text" placeholder="Who is the Third Talk Topic?" 
                value="<% if (editing) { %><%=agenda.tTopic%><% } %>">
                <hr>
            </div>
            <div id="finalAgendaOptions" <% if (editing) { %> style="display: block" <% } %>> 
                <p>Last Hymn:</p>
                <input name="lHymn" type="text" placeholder="What is the last hymn?" 
                value="<% if (editing) { %><%=agenda.lHymn%><% } %>">
                <p>Last Prayer:</p>
                <input name="lPrayer" type="text" placeholder="What is the Last prayer?" 
                value="<% if (editing) { %><%=agenda.lPrayer%><% } %>">
            </div>
            <button type="submit" id="btn-agenda"><% if (editing) {%>Update Agenda<% } else { %>Create Agenda<% } %></button>
            <% if (editing) { %>
                <input type="hidden" value="<%=agenda._id%>" name="agendaId">
                <input type="hidden" value="<%=updateAgenda = 1%>" name="updateAgenda">
            <% } %>
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <input type="hidden" name="meetingKind" id="meetingKind" value="">
        </form>
    </div>
</div>